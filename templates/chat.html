<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Chat</title>
    
    <!-- Google Consent Mode -->
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      
      gtag('consent', 'default', {
        'ad_storage': 'denied',
        'ad_user_data': 'denied',
        'ad_personalization': 'denied',
        'analytics_storage': 'denied'
      });
    </script>
    
    <!-- Google Funding Choices (Consent Management Platform) -->
    <script async src="https://fundingchoicesmessages.google.com/i/pub-5356065806901786?ers=1" nonce="NONCE"></script>
    <script nonce="NONCE">(function() {function signalGooglefcPresent() {if (!window.frames['googlefcPresent']) {if (document.body) {const iframe = document.createElement('iframe'); iframe.style = 'width: 0; height: 0; border: none; z-index: -1000; left: -1000px; top: -1000px;'; iframe.style.display = 'none'; iframe.name = 'googlefcPresent'; document.body.appendChild(iframe);} else {setTimeout(signalGooglefcPresent, 0);}}}signalGooglefcPresent();})();</script>
    
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5356065806901786"
     crossorigin="anonymous"></script>
    
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/pixel.css') }}"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/chat.css') }}"
    />
  </head>
  <body>
    <a href="javascript:history.back()">
      <img
        class="back-button"
        src="{{ url_for('static', filename='images/back-button.png') }}"
        alt="back-button"
      />
    </a>

    <div class="chat-container">
      <h1>Chat</h1>
      <div
        id="chat-messages"
        style="min-height: 200px; margin-bottom: 1em"
      ></div>
      <div
        id="chat-loader"
        style="
          display: none;
          justify-content: center;
          align-items: center;
          margin: 1em 0;
        "
      >
        <span class="pixel-loader"></span>
        <span style="font-family: inherit; color: #ffe066; margin-left: 1em"
          >Thinking...</span
        >
      </div>
      <form id="chat-form">
        <input
          type="text"
          id="chat-input"
          placeholder="Type your message..."
          autocomplete="off"
          required
          style="width: 100%"
        />
        <button type="submit">Send</button>
      </form>
    </div>

    <script src="{{ url_for('static', filename='js/chat.js') }}"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  </body>
</html>
